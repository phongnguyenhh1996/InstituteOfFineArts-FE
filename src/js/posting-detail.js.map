{"version":3,"sources":["src/posting-detail.js"],"names":["currentPosting","UNAUTHORIZED","axios","interceptors","response","use","error","status","localStorage","removeItem","window","location","href","Promise","reject","apiUrl","urlString","url","URL","id","searchParams","get","fetchPosting","method","headers","Authorization","getItem","then","res","console","log","data","$","attr","ImagePath","Mark","hide","show","text","click","val","modal","catch","toastr"],"mappings":";;AAAA;AAIA,IAAIA,cAAc,GAAG,EAArB;AACA,IAAMC,YAAY,GAAG,GAArB;AACAC,KAAK,CAACC,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CACE,UAACD,QAAD;AAAA,SAAcA,QAAd;AAAA,CADF,EAEE,UAACE,KAAD,EAAW;AAAA,MAEPC,MAFO,GAGLD,KAAK,CAACF,QAHD,CAEPG,MAFO;;AAIT,MAAIA,MAAM,KAAKN,YAAf,EAA6B;AAC3BO,IAAAA,YAAY,CAACC,UAAb,CAAwB,aAAxB;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,aAAvB;AACD;;AACD,SAAOC,OAAO,CAACC,MAAR,CAAeR,KAAf,CAAP;AACD,CAXH;AAaA,IAAMS,MAAM,GAAG,8BAAf;AACA,IAAMC,SAAS,GAAGN,MAAM,CAACC,QAAP,CAAgBC,IAAlC;AACA,IAAMK,GAAG,GAAG,IAAIC,GAAJ,CAAQF,SAAR,CAAZ;AACA,IAAMG,EAAE,GAAGF,GAAG,CAACG,YAAJ,CAAiBC,GAAjB,CAAqB,IAArB,CAAX;AAEAC,YAAY;;AAGZ,SAASA,YAAT,GAAwB;AACtBpB,EAAAA,KAAK,CAAC;AACJqB,IAAAA,MAAM,EAAE,KADJ;AAEJN,IAAAA,GAAG,EAAKF,MAAL,qBAA2BI,EAF1B;AAGJK,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,cAAYjB,YAAY,CAACkB,OAAb,CAAqB,aAArB;AADlB;AAHL,GAAD,CAAL,CAOGC,IAPH,CAOQ,UAACC,GAAD,EAAS;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AAEA,QAAIA,GAAG,IAAIA,GAAG,CAACG,IAAf,EAAqB;AACnB/B,MAAAA,cAAc,GAAG4B,GAAG,CAACG,IAArB;AACAC,MAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBC,IAAjB,CAAsB,KAAtB,OAAgClB,MAAhC,GAAyCa,GAAG,CAACG,IAAJ,CAASG,SAAlD;;AACA,UAAI,CAACN,GAAG,CAACG,IAAJ,CAASI,IAAd,EAAoB;AAClBH,QAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBI,IAAzB;AACD,OAFD,MAEO;AACLJ,QAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBK,IAAzB;AACAL,QAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBM,IAAlB,CAAuBV,GAAG,CAACG,IAAJ,CAASI,IAAhC;AACD;AACF;AACF,GApBH;AAqBD;;AAEDH,CAAC,CAAC,UAAD,CAAD,CAAcO,KAAd,CAAoB,YAAM;AACxBrC,EAAAA,KAAK,CAAC;AACJqB,IAAAA,MAAM,EAAE,KADJ;AAEJN,IAAAA,GAAG,EAAKF,MAAL,qBAA2BI,EAF1B;AAGJK,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,cAAYjB,YAAY,CAACkB,OAAb,CAAqB,aAArB;AADlB,KAHL;AAMJK,IAAAA,IAAI,oBACC/B,cADD;AAEFmC,MAAAA,IAAI,EAAEH,CAAC,CAAC,OAAD,CAAD,CAAWQ,GAAX;AAFJ;AANA,GAAD,CAAL,CAWGb,IAXH,CAWQ,YAAM;AACVK,IAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBS,KAAnB,CAAyB,MAAzB;AACAnB,IAAAA,YAAY;AACb,GAdH,EAeGoB,KAfH,CAeS;AAAA,WAAMC,MAAM,CAACrC,KAAP,CAAa,kBAAb,CAAN;AAAA,GAfT;AAgBD,CAjBD","sourcesContent":["/* eslint-disable linebreak-style */\nimport $ from 'jquery'\nimport axios from 'axios'\nimport toastr from 'toastr'\nlet currentPosting = {}\nconst UNAUTHORIZED = 401\naxios.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const {\n      status\n    } = error.response\n    if (status === UNAUTHORIZED) {\n      localStorage.removeItem('accessToken')\n      window.location.href = '/login.html'\n    }\n    return Promise.reject(error)\n  }\n)\nconst apiUrl = 'http://192.168.43.211:44396/'\nconst urlString = window.location.href\nconst url = new URL(urlString)\nconst id = url.searchParams.get('id')\n\nfetchPosting()\n\n\nfunction fetchPosting() {\n  axios({\n    method: 'get',\n    url: `${apiUrl}api/Postings/${id}`,\n    headers: {\n      Authorization: `bearer ${localStorage.getItem('accessToken')}`\n    }\n  })\n    .then((res) => {\n      console.log(res)\n\n      if (res && res.data) {\n        currentPosting = res.data\n        $('#postingImg').attr('src', `${apiUrl}${res.data.ImagePath}`)\n        if (!res.data.Mark) {\n          $('#postingMarkWrapper').hide()\n        } else {\n          $('#postingMarkWrapper').show()\n          $('#postingMark').text(res.data.Mark)\n        }\n      }\n    })\n}\n\n$('#addMark').click(() => {\n  axios({\n    method: 'put',\n    url: `${apiUrl}api/Postings/${id}`,\n    headers: {\n      Authorization: `bearer ${localStorage.getItem('accessToken')}`\n    },\n    data: {\n      ...currentPosting,\n      Mark: $('#name').val()\n    }\n  })\n    .then(() => {\n      $('#exampleModal').modal('hide')\n      fetchPosting()\n    })\n    .catch(() => toastr.error('Add mark failed!'))\n})\n"],"file":"posting-detail.js"}