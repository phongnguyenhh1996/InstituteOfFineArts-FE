{"version":3,"sources":["src/user-list.js"],"names":["UNAUTHORIZED","ROLE","roleName","authPath","axios","interceptors","response","use","error","status","window","location","href","Promise","reject","apiUrl","method","url","headers","Authorization","localStorage","getItem","then","res","data","tableUser","$","rowData","clone","find","empty","length","forEach","item","newRowData","cell","eq","append","Username","YearOfBirth","RoleId","parent","attr","UserId","show"],"mappings":";;AAAA;AAGA,IAAMA,YAAY,GAAG,GAArB;AACA,IAAMC,IAAI,GAAG;AACX,KAAG;AACDC,IAAAA,QAAQ,EAAE,OADT;AAEDC,IAAAA,QAAQ,EAAE,CAAC,SAAD,EAAY,uBAAZ,EAAqC,yBAArC;AAFT,GADQ;AAKX,KAAG;AACDD,IAAAA,QAAQ,EAAE,SADT;AAEDC,IAAAA,QAAQ,EAAE,CAAC,SAAD;AAFT,GALQ;AASX,KAAG;AACDD,IAAAA,QAAQ,EAAE,SADT;AAEDC,IAAAA,QAAQ,EAAE,CAAC,SAAD;AAFT,GATQ;AAaX,KAAG;AACDD,IAAAA,QAAQ,EAAE,SADT;AAEDC,IAAAA,QAAQ,EAAE,CAAC,SAAD;AAFT;AAbQ,CAAb;AAkBAC,KAAK,CAACC,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CACE,UAACD,QAAD;AAAA,SAAcA,QAAd;AAAA,CADF,EAEE,UAACE,KAAD,EAAW;AAAA,MAEPC,MAFO,GAGLD,KAAK,CAACF,QAHD,CAEPG,MAFO;;AAIT,MAAIA,MAAM,KAAKT,YAAf,EAA6B;AAC3BU,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,aAAvB;AACD;;AACD,SAAOC,OAAO,CAACC,MAAR,CAAeN,KAAf,CAAP;AACD,CAVH;AAYA,IAAMO,MAAM,GAAG,8BAAf,C,CACA;;AACAX,KAAK,CAAC;AACJY,EAAAA,MAAM,EAAE,KADJ;AAEJC,EAAAA,GAAG,EAAKF,MAAL,eAFC;AAGJG,EAAAA,OAAO,EAAE;AACPC,IAAAA,aAAa,cAAYC,YAAY,CAACC,OAAb,CAAqB,aAArB;AADlB;AAHL,CAAD,CAAL,CAOGC,IAPH,CAOQ,UAACC,GAAD,EAAS;AAAA,MAEXC,IAFW,GAGTD,GAHS,CAEXC,IAFW;AAIb,MAAMC,SAAS,GAAGC,CAAC,CAAC,WAAD,CAAnB,CAJa,CAKb;;AACA,MAAMC,OAAO,GAAGD,CAAC,CAAC,UAAD,CAAD,CAAcE,KAAd,EAAhB,CANa,CAOb;;AACAH,EAAAA,SAAS,CAACI,IAAV,CAAe,OAAf,EAAwBC,KAAxB,GARa,CASb;;AACA,MAAIN,IAAI,CAACO,MAAT,EAAiB;AACfP,IAAAA,IAAI,CAACQ,OAAL,CAAa,UAACC,IAAD,EAAU;AACrB,UAAMC,UAAU,GAAGP,OAAO,CAACC,KAAR,EAAnB;AACA,UAAMO,IAAI,GAAGD,UAAU,CAACL,IAAX,CAAgB,IAAhB,CAAb;AACAM,MAAAA,IAAI,CAACC,EAAL,CAAQ,CAAR,EAAWN,KAAX,GAAmBO,MAAnB,CAA0BJ,IAAI,CAACK,QAA/B;AACAH,MAAAA,IAAI,CAACC,EAAL,CAAQ,CAAR,EAAWN,KAAX,GAAmBO,MAAnB,CAA0BJ,IAAI,CAACM,WAA/B,EAJqB,CAKrB;;AACAJ,MAAAA,IAAI,CAACC,EAAL,CAAQ,CAAR,EAAWN,KAAX,GAAmBO,MAAnB,CAA0BpC,IAAI,CAACgC,IAAI,CAACO,MAAN,CAAJ,CAAkBtC,QAA5C;AACAgC,MAAAA,UAAU,CAACL,IAAX,CAAgB,oBAAhB,EAAsCY,MAAtC,GAA+CC,IAA/C,CAAoD,MAApD,+BAAuFT,IAAI,CAACU,MAA5F;AACAlB,MAAAA,SAAS,CAACI,IAAV,CAAe,OAAf,EAAwBQ,MAAxB,CAA+BH,UAA/B;AACD,KATD;AAUD;AACF,CA7BH;AA+BAR,CAAC,CAAC,MAAD,CAAD,CAAUkB,IAAV","sourcesContent":["/* eslint-disable linebreak-style */\nimport $ from 'jquery'\nimport axios from 'axios'\nconst UNAUTHORIZED = 401\nconst ROLE = {\n  1: {\n    roleName: 'Admin',\n    authPath: ['/admin/', '/admin/user-list.html', '/admin/create-user.html']\n  },\n  2: {\n    roleName: 'Manager',\n    authPath: ['/admin/']\n  },\n  3: {\n    roleName: 'Teacher',\n    authPath: ['/admin/']\n  },\n  4: {\n    roleName: 'Student',\n    authPath: ['/admin/']\n  }\n}\naxios.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const {\n      status\n    } = error.response\n    if (status === UNAUTHORIZED) {\n      window.location.href = '/login.html'\n    }\n    return Promise.reject(error)\n  }\n)\nconst apiUrl = 'http://192.168.43.211:44396/'\n// get user list\naxios({\n  method: 'get',\n  url: `${apiUrl}/api/Users`,\n  headers: {\n    Authorization: `bearer ${localStorage.getItem('accessToken')}`\n  }\n})\n  .then((res) => {\n    const {\n      data\n    } = res\n    const tableUser = $('#userList')\n    // clone row\n    const rowData = $('#rowData').clone()\n    // empty table\n    tableUser.find('tbody').empty()\n    // append every row\n    if (data.length) {\n      data.forEach((item) => {\n        const newRowData = rowData.clone()\n        const cell = newRowData.find('td')\n        cell.eq(0).empty().append(item.Username)\n        cell.eq(1).empty().append(item.YearOfBirth)\n        // eslint-disable-next-line no-magic-numbers\n        cell.eq(2).empty().append(ROLE[item.RoleId].roleName)\n        newRowData.find('i.fas.fa-user-edit').parent().attr('href', `admin/edit-user.html?id=${item.UserId}`)\n        tableUser.find('tbody').append(newRowData)\n      })\n    }\n  })\n\n$('test').show()\n"],"file":"user-list.js"}