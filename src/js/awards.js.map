{"version":3,"sources":["src/awards.js"],"names":["UNAUTHORIZED","axios","interceptors","response","use","error","status","window","location","href","Promise","reject","apiUrl","fetchAwardList","$","click","formInput","removeClass","next","remove","data","invalid","each","val","trim","addClass","after","attr","method","url","headers","Authorization","localStorage","getItem","then","res","modal","awardItemClone","clone","empty","forEach","item","awardItem","Object","keys","key","find","text","append","fadeIn"],"mappings":"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","sourcesContent":["/* eslint-disable linebreak-style */\nimport $ from 'jquery'\nimport axios from 'axios'\nconst UNAUTHORIZED = 401\naxios.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const {\n      status\n    } = error.response\n    if (status === UNAUTHORIZED) {\n      window.location.href = '/login.html'\n    }\n    return Promise.reject(error)\n  }\n)\nconst apiUrl = 'http://192.168.43.211:44396/'\n// fetch award list\nfetchAwardList()\n// create award\n$('#addAward').click(() => {\n  const formInput = $('.form-control')\n  formInput.removeClass('is-invalid')\n  formInput.next().remove()\n  const data = {}\n  let invalid = false\n  formInput.each(function () {\n    if (!$(this).val().trim()) {\n      invalid = true\n      $(this).addClass('is-invalid')\n      $(this).after($('<div class=\"invalid-feedback\">This field is required!</div>'))\n    } else {\n      data[$(this).attr('name')] = $(this).val().trim()\n    }\n  })\n  if (!invalid) {\n    axios({\n      method: 'post',\n      url: `${apiUrl}/api/Awards`,\n      headers: {\n        Authorization: `bearer ${localStorage.getItem('accessToken')}`\n      },\n      data\n    })\n      .then((res) => {\n        if (res && res.data) {\n          $('#exampleModal').modal('hide')\n          // fetch award list\n          fetchAwardList()\n        }\n      })\n  }\n})\n// get award function\nfunction fetchAwardList() {\n  axios({\n    method: 'get',\n    url: `${apiUrl}/api/Awards`,\n    headers: {\n      Authorization: `bearer ${localStorage.getItem('accessToken')}`\n    }\n  })\n    .then((res) => {\n      if (res && res.data) {\n        const awardItemClone = $('#awardItem').clone()\n        $('#awardList').empty()\n        res.data.forEach((item) => {\n          const awardItem = awardItemClone.clone()\n          Object.keys(item).forEach((key) => {\n            awardItem.find(`[name='${key}']`).text(item[key])\n          })\n          $('#awardList').append(awardItem)\n          awardItem.fadeIn()\n        })\n      }\n    })\n}\n\n"],"file":"awards.js"}